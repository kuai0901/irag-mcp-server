# ç™¾åº¦iRAG MCPæœåŠ¡å™¨ - é¡¹ç›®æ€»ç»“

## é¡¹ç›®æ¦‚è¿°

æœ¬é¡¹ç›®æˆåŠŸåˆ›å»ºäº†ä¸€ä¸ªåŸºäºç™¾åº¦iRAGå›¾ç‰‡ç”ŸæˆAPIçš„MCPï¼ˆModel Context Protocolï¼‰æœåŠ¡å™¨ï¼Œå…è®¸MCPå®¢æˆ·ç«¯ï¼ˆå¦‚Claude Desktopï¼‰é€šè¿‡æ ‡å‡†åŒ–æ¥å£è°ƒç”¨ç™¾åº¦çš„å›¾ç‰‡ç”ŸæˆæœåŠ¡ã€‚

## å·²å®Œæˆçš„åŠŸèƒ½

### âœ… æ ¸å¿ƒåŠŸèƒ½
- [x] ç™¾åº¦iRAG APIå®¢æˆ·ç«¯å°è£…
- [x] MCPåè®®å®Œæ•´å®ç°
- [x] å›¾ç‰‡ç”Ÿæˆå·¥å…·ï¼ˆgenerate_imageï¼‰
- [x] æ”¯æŒå¤šç§æ¨¡å‹ï¼ˆirag-1.0, flux.1-schnellï¼‰
- [x] çµæ´»çš„å‚æ•°é…ç½®
- [x] å®Œå–„çš„é”™è¯¯å¤„ç†
- [x] å›¾ç‰‡æœ¬åœ°ä¿å­˜åŠŸèƒ½
- [x] å¤šç§èµ„æºæ¨¡å¼ï¼ˆURL/æœ¬åœ°æ–‡ä»¶ï¼‰
- [x] å¯é…ç½®çš„é»˜è®¤æ¨¡å‹

### âœ… æŠ€æœ¯ç‰¹æ€§
- [x] TypeScriptå¼€å‘ï¼Œç±»å‹å®‰å…¨
- [x] å®Œæ•´çš„å‚æ•°éªŒè¯ï¼ˆä½¿ç”¨Zodï¼‰
- [x] è‡ªåŠ¨é‡è¯•æœºåˆ¶
- [x] ç»“æ„åŒ–æ—¥å¿—è®°å½•
- [x] ç¯å¢ƒå˜é‡é…ç½®ç®¡ç†
- [x] å•å…ƒæµ‹è¯•è¦†ç›–

### âœ… å¼€å‘å·¥å…·
- [x] ESLintä»£ç æ£€æŸ¥
- [x] Jestæµ‹è¯•æ¡†æ¶
- [x] TypeScriptç¼–è¯‘
- [x] å¼€å‘çƒ­é‡è½½
- [x] æ„å»ºè„šæœ¬

## é¡¹ç›®ç»“æ„

```
irag-mcp-server/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ client/          # ç™¾åº¦iRAG APIå®¢æˆ·ç«¯
â”‚   â”‚   â””â”€â”€ irag-client.ts
â”‚   â”œâ”€â”€ config/          # é…ç½®ç®¡ç†
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ server/          # MCPæœåŠ¡å™¨å®ç°
â”‚   â”‚   â””â”€â”€ mcp-server.ts
â”‚   â”œâ”€â”€ types/           # TypeScriptç±»å‹å®šä¹‰
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ utils/           # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ logger.ts
â”‚   â”‚   â””â”€â”€ image-saver.ts  # å›¾ç‰‡ä¿å­˜å·¥å…·
â”‚   â”œâ”€â”€ __tests__/       # æµ‹è¯•æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ basic.test.ts
â”‚   â””â”€â”€ index.ts         # ä¸»å…¥å£æ–‡ä»¶
â”œâ”€â”€ dist/                # ç¼–è¯‘è¾“å‡ºç›®å½•
â”œâ”€â”€ docs/                # æ–‡æ¡£æ–‡ä»¶
â”‚   â”œâ”€â”€ README.md
â”‚   â”œâ”€â”€ QUICKSTART.md
â”‚   â”œâ”€â”€ EXAMPLES.md
â”‚   â””â”€â”€ PROJECT_SUMMARY.md
â”œâ”€â”€ package.json         # é¡¹ç›®é…ç½®
â”œâ”€â”€ tsconfig.json        # TypeScripté…ç½®
â”œâ”€â”€ jest.config.js       # Jestæµ‹è¯•é…ç½®
â”œâ”€â”€ .eslintrc.json       # ESLinté…ç½®
â”œâ”€â”€ .env.example         # ç¯å¢ƒå˜é‡æ¨¡æ¿
â””â”€â”€ test-server.js       # æœåŠ¡å™¨æµ‹è¯•è„šæœ¬
```

## æ”¯æŒçš„APIå‚æ•°

### generate_imageå·¥å…·å‚æ•°

| å‚æ•° | ç±»å‹ | å¿…éœ€ | é»˜è®¤å€¼ | æè¿° |
|------|------|------|--------|------|
| prompt | string | âœ… | - | å›¾ç‰‡ç”Ÿæˆæç¤ºè¯ |
| model | string | âŒ | irag-1.0 | æ¨¡å‹é€‰æ‹© |
| refer_image | string | âŒ | - | å‚è€ƒå›¾ç‰‡URL |
| n | integer | âŒ | 1 | ç”Ÿæˆæ•°é‡(1-4) |
| size | string | âŒ | 1024x1024 | å›¾ç‰‡å°ºå¯¸ |
| steps | integer | âŒ | - | é‡‡æ ·æ­¥æ•°(flux.1-schnell) |
| seed | integer | âŒ | - | éšæœºç§å­(flux.1-schnell) |
| guidance | number | âŒ | 3.5 | æŒ‡å¯¼å¯†åº¦(flux.1-schnell) |

### å›¾ç‰‡ä¿å­˜é…ç½®

| é…ç½®é¡¹ | ç±»å‹ | é»˜è®¤å€¼ | æè¿° |
|--------|------|--------|------|
| RESOURCE_MODE | string | local | url: ä»…è¿”å›URLå’Œbase64 \| local: åŒæ—¶ä¿å­˜åˆ°æœ¬åœ° |
| BASE_PATH | string | æ¡Œé¢/irag-images | è‡ªå®šä¹‰å›¾ç‰‡ä¿å­˜è·¯å¾„ |
| MODEL | string | irag-1.0 | é»˜è®¤æ¨¡å‹: irag-1.0 \| flux.1-schnell |

## ä½¿ç”¨æ–¹æ³•

### 1. å¿«é€Ÿå¼€å§‹
```bash
# å®‰è£…å’Œæ„å»º
npm run setup

# éªŒè¯åŠŸèƒ½
npm run validate
```

### 2. é…ç½®Claude Desktop
```json
{
  "mcpServers": {
    "irag-image-generator": {
      "command": "node",
      "args": ["/path/to/irag-mcp-server/dist/index.js"],
      "env": {
        "BAIDU_API_KEY": "your-api-key"
      }
    }
  }
}
```

### 3. ä½¿ç”¨ç¤ºä¾‹
åœ¨Claude Desktopä¸­ï¼š
```
è¯·ç”Ÿæˆä¸€å¼ ç°ä»£ç®€çº¦é£æ ¼çš„å®¢å…è®¾è®¡å›¾
```

## æŠ€æœ¯äº®ç‚¹

### 1. ç±»å‹å®‰å…¨
- å®Œæ•´çš„TypeScriptç±»å‹å®šä¹‰
- è¿è¡Œæ—¶å‚æ•°éªŒè¯
- ç¼–è¯‘æ—¶ç±»å‹æ£€æŸ¥

### 2. é”™è¯¯å¤„ç†
- è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯
- è‡ªåŠ¨é‡è¯•æœºåˆ¶
- ä¼˜é›…çš„é™çº§å¤„ç†

### 3. å¯è§‚æµ‹æ€§
- ç»“æ„åŒ–æ—¥å¿—è®°å½•
- è¯·æ±‚/å“åº”è¿½è¸ª
- æ€§èƒ½ç›‘æ§

### 4. å¯ç»´æŠ¤æ€§
- æ¨¡å—åŒ–æ¶æ„
- æ¸…æ™°çš„ä»£ç ç»„ç»‡
- å®Œæ•´çš„æ–‡æ¡£

## æµ‹è¯•è¦†ç›–

### åŸºç¡€æµ‹è¯•ï¼ˆæ— éœ€çœŸå®API Keyï¼‰
- âœ… åŸºæœ¬åŠŸèƒ½æµ‹è¯•
- âœ… å‚æ•°éªŒè¯æµ‹è¯•
- âœ… API Keyæ ¼å¼éªŒè¯
- âœ… æœåŠ¡å™¨å¯åŠ¨æµ‹è¯•
- âœ… æ¨¡å‹å’Œå°ºå¯¸æ”¯æŒæµ‹è¯•

### çœŸå®APIæµ‹è¯•ï¼ˆéœ€è¦çœŸå®API Keyï¼‰
- âœ… ç›´æ¥APIè°ƒç”¨æµ‹è¯• (`npm run test:api`)
- âœ… å›¾ç‰‡ç”Ÿæˆå’Œä¸‹è½½æµ‹è¯•
- âœ… Base64è½¬æ¢éªŒè¯
- âœ… ç«¯åˆ°ç«¯MCPå·¥å…·è°ƒç”¨æµ‹è¯• (`npm run test:e2e`)
- âœ… å®Œæ•´æµç¨‹éªŒè¯

### æµ‹è¯•è„šæœ¬
- `npm test` - åŸºç¡€å•å…ƒæµ‹è¯•
- `npm run test:server` - æœåŠ¡å™¨å¯åŠ¨æµ‹è¯•
- `npm run test:api` - çœŸå®APIè°ƒç”¨æµ‹è¯•
- `npm run test:e2e` - ç«¯åˆ°ç«¯æµ‹è¯•
- `npm run test:images` - å›¾ç‰‡ä¿å­˜åŠŸèƒ½æµ‹è¯•
- `npm run test:config` - é…ç½®å‚æ•°æµ‹è¯•
- `npm run validate` - åŸºç¡€éªŒè¯
- `npm run validate:full` - å®Œæ•´éªŒè¯ï¼ˆåŒ…æ‹¬APIï¼‰

## éƒ¨ç½²å»ºè®®

### å¼€å‘ç¯å¢ƒ
```bash
npm run dev
```

### ç”Ÿäº§ç¯å¢ƒ
```bash
npm run build
npm start
```

### Dockeréƒ¨ç½²ï¼ˆå¯é€‰ï¼‰
```dockerfile
FROM node:18-alpine
WORKDIR /app
COPY package*.json ./
RUN npm ci --only=production
COPY dist ./dist
CMD ["npm", "start"]
```

## æ€§èƒ½ç‰¹æ€§

- ğŸš€ å¿«é€Ÿå¯åŠ¨ï¼ˆ< 2ç§’ï¼‰
- ğŸ”„ è‡ªåŠ¨é‡è¯•æœºåˆ¶
- âš¡ å¼‚æ­¥å¤„ç†
- ğŸ“Š å†…å­˜ä¼˜åŒ–
- ğŸ›¡ï¸ é”™è¯¯éš”ç¦»

## å®‰å…¨è€ƒè™‘

- ğŸ” API Keyç¯å¢ƒå˜é‡å­˜å‚¨
- ğŸ›¡ï¸ è¾“å…¥å‚æ•°éªŒè¯
- ğŸš« æ•æ„Ÿä¿¡æ¯è¿‡æ»¤
- ğŸ“ å®‰å…¨æ—¥å¿—è®°å½•

## æ‰©å±•æ€§

é¡¹ç›®è®¾è®¡æ”¯æŒä»¥ä¸‹æ‰©å±•ï¼š

1. **æ–°æ¨¡å‹æ”¯æŒ** - åœ¨typesä¸­æ·»åŠ æ–°æ¨¡å‹ç±»å‹
2. **æ–°å‚æ•°æ”¯æŒ** - æ‰©å±•æ¥å£å®šä¹‰å’ŒéªŒè¯schema
3. **æ–°åŠŸèƒ½** - æ·»åŠ æ–°çš„MCPå·¥å…·
4. **ç›‘æ§é›†æˆ** - æ·»åŠ APMå’ŒæŒ‡æ ‡æ”¶é›†

## å·²çŸ¥é™åˆ¶

1. ä»…æ”¯æŒç™¾åº¦iRAG API
2. å›¾ç‰‡è¾“å‡ºä¸ºURLé“¾æ¥ï¼ˆ24å°æ—¶æœ‰æ•ˆæœŸï¼‰
3. ä¾èµ–ç½‘ç»œè¿æ¥ç¨³å®šæ€§
4. APIè°ƒç”¨æœ‰é…é¢é™åˆ¶

## åç»­æ”¹è¿›å»ºè®®

1. æ·»åŠ å›¾ç‰‡ç¼“å­˜æœºåˆ¶
2. æ”¯æŒæ›´å¤šå›¾ç‰‡æ ¼å¼
3. æ·»åŠ æ‰¹é‡å¤„ç†ä¼˜åŒ–
4. é›†æˆæ›´å¤šAIå›¾ç‰‡ç”ŸæˆæœåŠ¡
5. æ·»åŠ å›¾ç‰‡è´¨é‡è¯„ä¼°

## æ€»ç»“

æœ¬é¡¹ç›®æˆåŠŸå®ç°äº†ä¸€ä¸ªåŠŸèƒ½å®Œæ•´ã€ç±»å‹å®‰å…¨ã€æ˜“äºä½¿ç”¨çš„ç™¾åº¦iRAG MCPæœåŠ¡å™¨ã€‚é€šè¿‡æ ‡å‡†åŒ–çš„MCPåè®®ï¼Œç”¨æˆ·å¯ä»¥åœ¨Claude Desktopç­‰å®¢æˆ·ç«¯ä¸­æ— ç¼ä½¿ç”¨ç™¾åº¦çš„å›¾ç‰‡ç”Ÿæˆèƒ½åŠ›ã€‚é¡¹ç›®å…·æœ‰è‰¯å¥½çš„å¯ç»´æŠ¤æ€§å’Œæ‰©å±•æ€§ï¼Œä¸ºåç»­åŠŸèƒ½å¢å¼ºå¥ å®šäº†åšå®åŸºç¡€ã€‚
